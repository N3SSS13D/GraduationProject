C251 COMPILER V5.60.0,  main                                                               13/12/25  22:38:07  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\Output\main.obj
COMPILER INVOKED BY: S:\Embedded\Keil\C251\BIN\C251.EXE Sources\main.c XSMALL BROWSE INCDIR(.\Sources\inc;.\Sources\app;
                    -.\Sources\driver;.\Sources\utils) DEBUG PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Output\main.obj) 

stmt  level    source

    1          //<<AICUBE_USER_HEADER_REMARK_BEGIN>>
    2          ////////////////////////////////////////
    3          // 在此添加用户文件头说明信息  
    4          // 文件名称: main.c
    5          // 文件描述: 
    6          // 文件版本: V1.0
    7          // 修改记录:
    8          //   1. (2025-12-13) 创建文件
    9          ////////////////////////////////////////
   10          //<<AICUBE_USER_HEADER_REMARK_END>>
   11          
   12          
   13          #include "config.h"                     //默认已包含stdio.h、intrins.h等头文件
   14          
   15          
   16          //<<AICUBE_USER_INCLUDE_BEGIN>>
   17          // 在此添加用户头文件包含  
   18          //<<AICUBE_USER_INCLUDE_END>>
   19          
   20          
   21          //<<AICUBE_USER_GLOBAL_DEFINE_BEGIN>>
   22          // 在此添加用户全局变量定义、用户宏定义以及函数声明  
   23          //<<AICUBE_USER_GLOBAL_DEFINE_END>>
   24          
   25          
   26          
   27          ////////////////////////////////////////
   28          // 项目主函数
   29          // 入口参数: 无
   30          // 函数返回: 无
   31          ////////////////////////////////////////
   32          void main(void)
   33          {
   34   1          //<<AICUBE_USER_MAIN_INITIAL_BEGIN>>
   35   1          // 在此添加用户主函数初始化代码  
   36   1          //<<AICUBE_USER_MAIN_INITIAL_END>>
   37   1      
   38   1          SYS_Init();
   39   1      
   40   1          //<<AICUBE_USER_MAIN_CODE_BEGIN>>
   41   1          // 在此添加主函数中运行一次的用户代码  
   42   1          //<<AICUBE_USER_MAIN_CODE_END>>
   43   1      
   44   1          while (1)
   45   1          {
   46   2              //<<AICUBE_USER_MAIN_LOOP_BEGIN>>
   47   2              // 在此添加主函数中用户主循环代码  
   48   2              //<<AICUBE_USER_MAIN_LOOP_END>>
   49   2          }
   50   1      }
   51          
   52          ////////////////////////////////////////
   53          // 系统初始化函数
   54          // 入口参数: 无
   55          // 函数返回: 无
   56          ////////////////////////////////////////
   57          void SYS_Init(void)
   58          {
C251 COMPILER V5.60.0,  main                                                               13/12/25  22:38:07  PAGE 2   

   59   1          EnableAccessXFR();                  //使能访问扩展XFR
   60   1          AccessCodeFastest();                //设置最快速度访问程序代码
   61   1          AccessIXramFastest();               //设置最快速度访问内部XDATA
   62   1          IAP_SetTimeBase();                  //设置IAP等待参数,产生1us时基
   63   1      
   64   1          //<<AICUBE_USER_PREINITIAL_CODE_BEGIN>>
   65   1          // 在此添加用户预初始化代码  
   66   1          //<<AICUBE_USER_PREINITIAL_CODE_END>>
   67   1      
   68   1          P0M0 = 0x00; P0M1 = 0x00;           //初始化P0口为准双向口模式
   69   1          P1M0 = 0x00; P1M1 = 0x00;           //初始化P1口为准双向口模式
   70   1          P2M0 = 0x00; P2M1 = 0x00;           //初始化P2口为准双向口模式
   71   1          P3M0 = 0x00; P3M1 = 0x00;           //初始化P3口为准双向口模式
   72   1          P4M0 = 0x00; P4M1 = 0x00;           //初始化P4口为准双向口模式
   73   1          P5M0 = 0x00; P5M1 = 0x00;           //初始化P5口为准双向口模式
   74   1          P6M0 = 0x00; P6M1 = 0x00;           //初始化P6口为准双向口模式
   75   1          P7M0 = 0x00; P7M1 = 0x00;           //初始化P7口为准双向口模式
   76   1      
   77   1          delay_ms(1);
   78   1          USBLIB_Init();                      //USB库初始化
   79   1          delay_ms(1);
   80   1      
   81   1          //<<AICUBE_USER_INITIAL_CODE_BEGIN>>
   82   1          // 在此添加用户初始化代码  
   83   1          //<<AICUBE_USER_INITIAL_CODE_END>>
   84   1      
   85   1          EnableGlobalInt();                  //使能全局中断
   86   1      }
   87          
   88          ////////////////////////////////////////
   89          // 微秒延时函数
   90          // 入口参数: us (设置延时的微秒值)
   91          // 函数返回: 无
   92          ////////////////////////////////////////
   93          void delay_us(uint16_t us)
   94          {
   95   1          do
   96   1          {
   97   2              NOP(34);                        //(MAIN_Fosc + 500000) / 1000000 - 6
   98   2          } while (--us);
   99   1      }
  100          
  101          
  102          ////////////////////////////////////////
  103          // 毫秒延时函数
  104          // 入口参数: ms (设置延时的毫秒值)
  105          // 函数返回: 无
  106          ////////////////////////////////////////
  107          void delay_ms(uint16_t ms)
  108          {
  109   1          uint16_t i;
  110   1      
  111   1          do
  112   1          {
  113   2              i = MAIN_Fosc / 6000;
  114   2              while (--i);
  115   2          } while (--ms);
  116   1      }
  117          
  118          
  119          //<<AICUBE_USER_FUNCTION_IMPLEMENT_BEGIN>>
  120          // 在此添加用户函数实现代码  
  121          //<<AICUBE_USER_FUNCTION_IMPLEMENT_END>>
  122          
  123          

C251 COMPILER V5.60.0,  main                                                               13/12/25  22:38:07  PAGE 3   


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       169     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =         2     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
